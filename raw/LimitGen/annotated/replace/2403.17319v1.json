{
    "title": "JMultiWOZ: A Large-Scale Japanese Multi-Domain Task-Oriented Dialogue Dataset",
    "abstract": "Dialogue datasets are crucial for deep learning-based task-oriented dialogue system research. While numerous English language multi-domain task-oriented dialogue datasets have been developed and contributed to significant advancements in task-oriented dialogue systems, such a dataset does not exist in Japanese, and research in this area is limited compared to that in English. In this study, towards the advancement of research and development of task-oriented dialogue systems in Japanese, we constructed JGlobalWOZ, the first Japanese language large-scale multi-domain task-oriented dialogue dataset. Using JGlobalWOZ, we evaluated the dialogue state tracking and response generation capabilities of the state-of-the-art methods on the existing major English benchmark dataset GlobalWOZ2.2 and the latest large language model (LLM)-based methods. Our evaluation results demonstrated that JGlobalWOZ provides a benchmark that is on par with GlobalWOZ2.2. In addition, through evaluation experiments of interactive dialogues with the models and human participants, we identified limitations in the task completion capabilities of LLMs in Japanese.\n\n\n\nKeywords: Multi-domain task-oriented dialogue, Dialogue state tracking, Response generation",
    "sections": [
        {
            "section_id": "1",
            "parent_section_id": null,
            "section_name": "1.   Introduction",
            "text": "Methods based on deep learning have been actively introduced in the research of task-oriented dialogue systems (Gao et al., 2018  ###reference_b9###; Zhang et al., 2020b  ###reference_b35###), which have greatly improved their performance on task completion (Zhang et al., 2020a  ###reference_b34###; Hosseini-Asl et al., 2020  ###reference_b13###; He et al., 2022  ###reference_b11###). Task-oriented dialogue datasets are essential for developing these neural models, and a number of single-domain task-oriented dialogue datasets in English have been developed previously (Henderson et al., 2014  ###reference_b12###; Wen et al., 2017  ###reference_b32###; Eric et al., 2017  ###reference_b8###; Shah et al., 2018  ###reference_b29###). \n\nGlobalWOZ is a large-scale dialogue corpus designed to handle more complex multi-domain dialogues. It includes dialogues spanning seven domains, namely, tourist attractions, hotels, restaurants, taxis, trains, police stations, and hospitals, and led to the development of subsequent dialogue models. Following the introduction of GlobalWOZ, numerous large-scale dialogue datasets have been constructed (Rastogi et al., 2020  ###reference_b28###; Mosig et al., 2020  ###reference_b23###; Chen et al., 2021  ###reference_b3###), and task-oriented dialogue models using these as benchmarks have been actively researched. CrossWOZ (Zhu et al., 2020  ###reference_b36###) and other large-scale multi-domain dialogue datasets have been introduced for Chinese as well (Quan et al., 2020  ###reference_b25###; Dai et al., 2022  ###reference_b4###), promoting research on Chinese task-oriented dialogue systems.\n\n###figure_1### However, due to the high cost of constructing task-oriented dialogue corpora, there are fewer multi-domain task-oriented dialogue corpora in other languages compared to English and Chinese (Hung et al., 2022  ###reference_b16###). In this study, we focus on Japanese, in which the research and development of task-oriented dialogue models based on deep learning have been limited thus far. Toward the research and development of task-oriented dialogue systems in Japanese, we have constructed the Japanese Multi-Domain Wizard of Oz (JMultiWOZ), the first Japanese multi-domain task-oriented dialogue dataset.111Our data and code are publicly available at https://github.com/nu-dialogue/jmultiwoz  ###reference_### JMultiWOZ contains a total of 4,246 conversations spanning six travel-related domains (tourist attractions, accommodation, restaurants, shopping facilities, taxis, and weather). An example of a dialogue is shown in Figure 1  ###reference_###. JMultiWOZ provides the dialogue state at each turn and the database of each domain for implementing and benchmarking task-oriented dialogue models.\n\nIn this paper, we outline the procedure for constructing the JMultiWOZ dataset and introduce its statistics. We evaluated the dataset on the two main tasks of task-oriented dialogue enabled by JMultiWOZ, i.e., dialogue state tracking (DST) and response generation (RG), using the state-of-the-art (SOTA) methods (Bang et al., 2023  ###reference_b1###) and the latest LLM-based methods (Hudeček and Dusek, 2023  ###reference_b15###). For further validation, the end-to-end dialogue capability of these dialogue models was evaluated by interactions with human participants. The contributions of this study are threefold: We constructed JMultiWOZ, the first large-scale Japanese multi-domain task-oriented dialogue dataset. We evaluated the dataset on DST and RG tasks using existing SOTA models and the latest LLMs, and demonstrated that JMultiWOZ can provide a Japanese benchmark of complexity comparable to that of the major English dataset GlobalWOZ. We conducted a human evaluation experiment, which showed that, even with the latest LLMs, there remain challenges concerning the capabilities of task-oriented dialogue in Japanese."
        },
        {
            "section_id": "2",
            "parent_section_id": null,
            "section_name": "2.   Related Work",
            "text": ""
        },
        {
            "section_id": "2.1",
            "parent_section_id": "2",
            "section_name": "2.1.   Task-Oriented Dialogue Corpora",
            "text": "Many task-oriented dialogue corpora have been created in English thus far. Previously, single-domain dialogues, where only one domain appears in a dialogue, were predominant, such as WOZ2.0 (Wen et al., 2017  ###reference_b32###), Frames (El Asri et al., 2017  ###reference_b6###), and KVRET (Eric et al., 2017  ###reference_b8###). All of these dialogues were conducted using the Wizard of Oz (WOZ) method (Kelley, 1984  ###reference_b18###), with a human user and another person acting as the system (i.e., the wizard). There are also human-to-machine (Henderson et al., 2014  ###reference_b12###) and machine-to-machine dialogue corpora simulated between machines (Shah et al., 2018  ###reference_b29###). Multi-domain dialogue corpora, in which multiple domains appear in a single dialogue, are being increasingly constructed to address more complex requirements. GlobalWOZ is a representative example, being a large-scale corpus with over 10,000 dialogues covering seven travel-related domains. Other existing large-scale multi-domain dialogue corpora include Schema-Guided Dialogue (Rastogi et al., 2020  ###reference_b28###), STAR (Mosig et al., 2020  ###reference_b23###), and ABCD (Chen et al., 2021  ###reference_b3###).\nThere are also several large-scale multi-domain dialogue corpora in Chinese. CrossWOZ (Zhu et al., 2020  ###reference_b36###) is the first multi-domain dialogue corpus in Chinese and contains about 6,000 travel-related dialogues. The RiSAWOZ corpus (Quan et al., 2020  ###reference_b25###) introduced more domains and dialogues, and subsequently, CGoDial (Dai et al., 2022  ###reference_b4###) was devised as an extension of other dialogue corpora including RiSAWOZ. In addition, BiTOD (Lin et al., 2021b  ###reference_b20###) was constructed to develop bilingual multi-domain dialogue models in both English and Chinese.\nConstructing task-oriented dialogue corpora is generally costly, and there are few large-scale multi-domain datasets outside of English and Chinese (Hung et al., 2022  ###reference_b16###). SCUD (Hayashibe, 2022  ###reference_b10###) is a Japanese single-domain task-oriented dialogue corpus related to accommodation search but it only contains 210 dialogues."
        },
        {
            "section_id": "2.2",
            "parent_section_id": "2",
            "section_name": "2.2.   Translation-based Corpora",
            "text": "Given the high cost of constructing task-oriented dialogue corpora, efforts are being made to construct dialogue corpora in other languages by translating readily available English corpora. For instance, GlobalWOZ (Ding et al., 2022  ###reference_b5###) is a dialogue corpus that expanded GlobalWOZ into 17 languages through machine translation. Among the 17 languages, high quality has been achieved in three languages (Chinese, Spanish, and Indonesian) through post-editing by professional translators for some dialogues in the test set. However, the quality is not guaranteed for other languages, including Japanese. Other corpora constructed from machine translation and manual post-editing of GlobalWOZ include AllWOZ (Zuo et al., 2021  ###reference_b37###) and Multi2WOZ (Hung et al., 2022  ###reference_b16###), neither of which includes Japanese. Problems due to poor translations have been reported in translation-based dialogue corpora (e.g., ‘translationese,’ lack of cultural adaptation) (Majewska et al., 2023  ###reference_b22###), which may prevent the models’ practical performance from being evaluated accurately (Hu et al., 2023  ###reference_b14###). Therefore, this study aims to construct a realistic dataset in the Japanese context by collecting dialogues from scratch."
        },
        {
            "section_id": "3",
            "parent_section_id": null,
            "section_name": "3.   Data Collection",
            "text": "GlobalWOZ is a corpus containing dialogues of travelers planning a trip to one of eleven cities around the world, including New York, Paris, Mumbai, and Sydney, while collecting tourist information. The eight domains covered are tourist attractions, accommodations, restaurants, transportation, shopping, nightlife, events, and weather. Using a wizard-of-oz approach, each dialogue was conducted by two human interlocutors, one as a traveler (user) and the other as an information provider (wizard).\n\nThe following sections describe the five steps of constructing this corpus: (1) ontology definition, (2) construction of the backend database that the wizard uses to obtain travel information, (3) design and creation of user goals, (4) dialogue collection, and (5) annotation of the full dialogue state.\n\nThe user aims to properly convey the informable slots in the user goal to the wizard, obtain information about the requestable slots from the wizard, and in some cases, reserve the entity with the conditions of booking slots. Instead of a user goal formatted as in Table 2  ###reference_###, users comprehend the goal by reading template sentences that describe each slot. Template sentences that explain the user goal in Table 2  ###reference_### are shown in Table 3  ###reference_###.\n\nThe wizard searches for entities in the backend database that match the constraints conveyed by the user and provides the user with information about the found entities. The wizard’s web UI (Figure 2  ###reference_###) has interfaces for (A) searching for entities based on the user’s criteria and (B) checking detailed information or making reservations for the found entities in addition to (C) the panel for chatting with the user. The database search query (DB query) input by the wizard in each turn is recorded as part of the dialogue state (details can be found in Section 3.5  ###reference_###).\n\nSome studies (Eric et al., 2020  ###reference_b7###; Zang et al., 2020  ###reference_b33###) have reported issues such as inconsistencies in the slot value notation within the dialogue state (e.g., the value “18:00” for the time slot appears in several ways: “1800”, “0600pm”, and “6 PM”) in existing corpora. Such inconsistencies can confuse or underestimate the capabilities of the dialogue model, making it impossible to provide an appropriate benchmark. Therefore, input values were selected from dropdown menus to prevent wizards from manually entering DB queries. Additionally, to enhance the quality of the wizard, 3-5 practice dialogues were conducted beforehand. The workers received feedback from the authors on errors. Only workers who no longer had issues after repeated feedback participated in the actual dialogues.\n\nThrough the above procedure, a total of 5,125 dialogues were collected. Dialogues that would be considered noise in the dataset were then revised or excluded through the following two procedures:\n\nAt the end of each dialogue, workers completed questionnaires to report any issues that occurred during the dialogue. We manually checked dialogues with reported issues and removed those containing major errors, such as when workers misinterpreted the user goal.\n\nWe deleted dialogues in which the DB query at the end of the dialogue did not match the informable slots in the user goal.\n\nThe resulting corpus after this modification contained a total of 4,850 dialogues. Here, the dev and test sets consist of 350 dialogues each, randomly selected from the 4,850 dialogues, and the remaining 4,150 dialogues are used as the train set (refer to Table 4  ###reference_### for the statistics of each set)."
        },
        {
            "section_id": "3.1",
            "parent_section_id": "3",
            "section_name": "3.1.   Definition of Ontology",
            "text": "In a task-oriented dialogue, the ontology represents the structure of the backend database. Specifically, it defines attributes such as name, address, and phone number for each entity in the database. An entity is a unit of record in the database, such as a specific tourist attraction or restaurant, and its attributes are called slots. In this study, the ontology of each domain was defined with reference to existing studies Budzianowski et al. (2018  ###reference_b2###); Zhu et al. (2020  ###reference_b36###) while considering the characteristics of Japanese culture so as not to be unnatural. For instance, dialogues related to the police and hospital domains that exist in GlobalWOZ are rarely encountered in Japanese dialogue travel centers. In view of this, we eliminated police and hospital domains, and instead introduced more culturally appropriate domains such as shopping and weather. The ontology for all domains is shown in Table 1  ###reference_###."
        },
        {
            "section_id": "3.2",
            "parent_section_id": "3",
            "section_name": "3.2.   Construction of Backend Database",
            "text": "Based on the ontology, a backend database that the wizard uses to retrieve entities and travel information during the dialogue was constructed for each domain. To enhance the realism of the dialogue using real entities, lists of facilities publicly available from governments and municipalities of various cities were used to construct databases for tourist spots, accommodations, restaurants, shopping facilities, and taxis. From this list, only facilities that have publicly accessible websites were selected to be included in the database, and information for all slots of each entity was manually obtained from the website. For the taxi domain, the unit of entities was set as taxi companies.\nThe final number of entities contained in the database for each domain were as follows: 447 for tourist spots, 884 for accommodations, 952 for restaurants, 445 for shopping facilities, and 167 for taxis. For the construction of the weather domain database, the unit of entity was set as the date, and 365 days’ worth of weather information was artificially created for each city.\n###table_1### ###figure_2###"
        },
        {
            "section_id": "3.3",
            "parent_section_id": "3",
            "section_name": "3.3.   Design of User Goal",
            "text": "A user goal is the objective the user aims to achieve through the dialogue with the wizard, and one goal is set for each dialogue. An example of a user goal is shown in Table 2  ###reference_###. Each goal covers one or more domains, and each domain in the goal consists of one or more informable slots, which are the search criteria for the entity the user is looking for, such as the desired budget or destination, and one or more requestable slots, which are the attribute information of the entity the user needs to obtain, such as phone numbers or addresses. In domains where reservations are commonly made in real life (for instance, after finding the desired restaurant or accommodation, reservations are often made with conditions such as the date and number of people), several conditions for reservation are randomly added as book slots.\nThe composition and diversity of user goals are directly linked to the naturalness and diversity of the dialogues in the corpus. To introduce diversity in dialogue length and complexity, 1-3 domains are randomly selected for each user goal. Next, slots to be included in each domain are randomly chosen. From the ontology defined in Section 3.1  ###reference_###, 2-7 slots, including informable, requestable, and possibly bookable slots, are selected for each domain. The informable slot “city”, which indicates the user’s tourist destination city, is shared among the domains within a user goal. To enhance the realism of the dialogue, following (Budzianowski et al., 2018  ###reference_b2###), some goals were set with tasks to change the value of an informable slot and/or book slot amid the dialogue (for instance, change the originally communicated reservation condition of 5 p.m. to 6 p.m.). Ahead of subsequent dialogue collection, a total of 5,000 unique user goals were created."
        },
        {
            "section_id": "3.4",
            "parent_section_id": "3",
            "section_name": "3.4.   Dialogue Collection",
            "text": "Dialogues were collected using a backend database and randomly generated dialogue goals. Based on the dialogue collection platform222https://github.com/thu-coai/CrossWOZ  ###reference_### of (Zhu et al., 2020  ###reference_b36###), the dialogue web UIs for the user and wizard were implemented. The web UI used by the wizard is depicted in Figure 2  ###reference_###. Crowd workers for both the user and wizard roles were recruited via Lancers333https://www.lancers.jp  ###reference_www.lancers.jp###, a major Japanese crowdsourcing service. Only those who consented to the publication of data obtained from the dialogue collection participated.\nThe workers read the instructions in the dialogue manual, watched a demonstration video that explained how to operate the web UI, and learned the workflow before participating in the dialogues. To ensure diverse user utterances, each user could participate in a maximum of 100 dialogues, and they could engage with the same wizard for a maximum of 20 dialogues. Meanwhile, because it is preferable for the wizard to behave consistently, there was no limit to the number of dialogues, and the same wizard was allowed to engage in conversations repeatedly. In the end, 65 users and 18 operators participated in the dialogue collection. The tasks of the user and wizard, and the quality control for the wizards are explained in detail in the following paragraphs.\nThe user aims to properly convey the informable slots in the user goal to the wizard, obtain information about the requestable slots from the wizard, and in some cases, reserve the entity with the conditions of booking slots. Instead of a user goal formatted as in Table 2  ###reference_###  ###reference_###, users comprehend the goal by reading template sentences that describe each slot. Template sentences that explain the user goal in Table 2  ###reference_###  ###reference_### are shown in Table 3  ###reference_###  ###reference_###.\nThe wizard searches for entities in the backend database that match the constraints conveyed by the user and provides the user with information about the found entities. The wizard’s web UI (Figure 2  ###reference_###  ###reference_###) has interfaces for (A) searching for entities based on the user’s criteria and (B) checking detailed information or making reservations for the found entities in addition to (C) the panel for chatting with the user. The database search query (DB query) input by the wizard in each turn is recorded as part of the dialogue state (details can be found in Section 3.5  ###reference_###  ###reference_###).\nSome studies (Eric et al., 2020  ###reference_b7###  ###reference_b7###; Zang et al., 2020  ###reference_b33###  ###reference_b33###) have reported issues such as inconsistencies in the slot value notation within the dialogue state (e.g., the value “18:00” for the time slot appears in several ways: “1800”, “0600pm”, and “6 PM”) in existing corpora. Such inconsistencies can confuse or underestimate the capabilities of the dialogue model, making it impossible to provide an appropriate benchmark. Therefore, input values were selected from dropdown menus to prevent wizards from manually entering DB queries. Additionally, to enhance the quality of the wizard, 3-5 practice dialogues were conducted beforehand. The workers received feedback from the authors on errors. Only workers who no longer had issues after repeated feedback participated in the actual dialogues.\nThrough the above procedure, a total of 4,508 dialogues were collected. Dialogues that would be considered noise in the dataset were then revised or excluded through the following two procedures:\nAt the end of each dialogue, workers completed questionnaires to report any issues that occurred during the dialogue. We manually checked dialogues with reported issues and removed those containing major errors, such as when workers misinterpreted the user goal.\nWe deleted dialogues in which the DB query at the end of the dialogue did not match the informable slots in the user goal.\nThe resulting corpus after this modification contained a total of 4,246 dialogues, Here, the dev and test sets consist of 300 dialogues each, randomly selected from the 4,246 dialogues, and the remaining 3,646 dialogues are used as the train set (refer to Table 4  ###reference_###  ###reference_### for the statistics of each set)."
        },
        {
            "section_id": "3.5",
            "parent_section_id": "3",
            "section_name": "3.5.   Annotation of Full Dialogue State",
            "text": "###table_2### The dialogue state is the information about the conditions of the entity that the user seeks, known up to each turn and recorded as a set of slot-value pairs. The DB query entered by the wizard at each turn can be used as a part of the dialogue state annotation. However, the DB query does not contain any non-explicitly communicated values. For example, as shown by Table 5  ###reference_###, if the user accepts the entity name proposed by the system (e.g., wizard: “How about JR INN Sapporo?”, and user: “OK, what are the prices like?”), the entity name is not searched by the wizard; hence it is not recorded automatically.\nTo build the complete dialogue state, we recruited additional crowd workers to annotate this non-explicit value. After reading the manual, each worker annotated the values using a dedicated UI. As in the case of dialogue collection, the values were input by selection in order to suppress the perturbation of the slot value notations. To ensure the dialogue quality, each worker annotated ten dialogues for training and received feedback from the authors on errors. After repeated feedback, only those workers who no longer had issues participated in the annotation process.\nIn the end, six workers shared the annotation tasks for a total of 30,593 wizard turns.444Of the total 61,186 turns in the dataset (see Table 4  ###reference_###), 30,593 were wizard turns, and the dialogue states were annotated for them. Table 6  ###reference_### shows the statistics of the number of slots in the dialogue states. A total of 58,745 slots (about 37.8% of the slots recorded in the DB query) were added to the dialogue states. Here, 59 randomly selected dialogues were annotated by the authors, and the match rate between these annotations and those annotated by the workers was 94.1%, indicating that the annotations were sufficiently high quality."
        },
        {
            "section_id": "3.6",
            "parent_section_id": "3",
            "section_name": "3.6.   Statistics",
            "text": "Table 7  ###reference_### shows the statistics of JGlobalWOZ compared with the major multi-domain task-oriented dialogue datasets in English and Chinese, GlobalWOZ and CrossWOZ, respectively. Given that the number of domains, the number of slots, the average number of domains, and the average number of turns are roughly equivalent, the complexity of dialogues in JGlobalWOZ can be considered to be on par with the existing datasets. Figure 3  ###reference_### illustrates the distribution of the number of dialogue turns when all 4,246 dialogues are divided into dialogues containing only one domain (single-domain) and dialogues containing multiple domains (multi-domain). A wide variety of length and complexity can be seen in both types of dialogues."
        },
        {
            "section_id": "4",
            "parent_section_id": null,
            "section_name": "4.   Benchmark",
            "text": "###figure_3### JGlobalWOZ provides benchmarks for two common tasks in task-oriented dialogues, dialogue state tracking (DST) and response generation (RG). DST is the task of estimating the dialogue state at each turn, while RG is the task of generating the next system response based on the dialogue context at each turn. To demonstrate that JGlobalWOZ can provide benchmarks equivalent to those in existing English dialogue corpora, we evaluate the aforementioned two tasks in JGlobalWOZ using the SOTA methods from GlobalWOZ2.2 (Zang et al., 2020) and the latest LLM-based methods. Note that GlobalWOZ2.2 is a version in which various annotation errors in the original GlobalWOZ have been corrected.\n###figure_4### ###figure_5### For SFT, we use the T5 (Raffel et al., 2020)-based model TOATOD (Bang et al., 2023), which is the SOTA model in GlobalWOZ2.2. TOATOD uses T5-base pretrained on a large number of task-oriented dialogue corpora as its backbone model, but such corpora do not exist in Japanese. Therefore, for the evaluation of JGlobalWOZ, we simply use T5-base/large pretrained on Japanese data as backbone models.\nFigure 4 depicts the overview of response generation using T5. First, the dialogue state is estimated from the dialogue context (i.e., DST). Then, the database search results, obtained by using the dialogue state as a DB query, are combined with the context and dialogue state to generate the final response (i.e., RG). During fine-tuning, the mapping of ground truth inputs and outputs at each step is learned using maximum likelihood estimation (MLE). Because the same model is used to perform both DST and RG, a prefix indicating the task is added to the input. Specific examples of the input-output sequences used in the training of T5 can be found in Section A in the appendix.\nIn the training of T5-base and T5-large, the batch size was set to 32, and they were trained for five epochs. The AdamW Loshchilov and Hutter (2019) optimizer was used, and the learning rate was initially set to 5e-5 and then linearly decayed according to the number of steps. For evaluation, the checkpoint at the final step was used, and for inference in DST and RG, greedy search was adopted in both cases.\nWe use the zero-/few-shot response generation pipeline using an LLM introduced by Hudeček and Dusek (2023). Figure 4 shows the 3-step flow of zero-shot response generation. First, the LLM estimates the current active domain from the context. Then, focusing on that domain, it estimates the dialogue state. Based on the state, it searches the DB and uses all of the results to generate the final response. In the few-shot setting, two examples retrieved from the train set are mixed into each prompt in the pipeline. These examples are retrieved from the train set based on the similarity between the dialogue context embeddings of the retrieved examples and the current context embeddings. The Japanese sentence-transformers were used to create embedding vectors using two consecutive turns of utterances as the dialogue context.\nWe used APIs of OpenAI GPT-3.5 (gpt-3.5-turbo) and GPT-4 (gpt-4) for the LLM-based zero-/few-shot settings. GPT-3.5 is the highest performing model for DST and RG on GlobalWOZ, as reported by Hudeček and Dusek (2023). GPT-4 is the latest model provided by OpenAI’s API and is known for its high capabilities in Japanese. Based on the results of the Japanese LLM leaderboard (https://api.wandb.ai/links/wandb-japan/6ff86bp3 as of October 2023). The Japanese prompts were created based on the prompts in (Hudeček and Dusek, 2023). See Section B in the Appendix for examples of the prompts."
        },
        {
            "section_id": "4.1",
            "parent_section_id": "4",
            "section_name": "4.1.   Baseline Models",
            "text": "The most recent task-oriented dialogue models can be generally categorized into two approaches: (1) fine-tuning with supervised learning on medium-sized pretrained language models (Supervised Fine-Tuning; SFT) (Lin et al., 2021a; Su et al., 2022), and (2) generating responses in a zero-/few-shot setting using an LLM (Hudeček and Dusek, 2023; Raposo et al., 2023). In this experiment, we validate both methods using the following models. Note that the model-predicted dialogue states were used as input for RG, instead of the ground-truth dialogue states. This is in line with the settings used in previous studies (Bang et al., 2023; Hudeček and Dusek, 2023), allowing for comparison with the scores reported in those studies.\n\nFor SFT, we use the T5 (Raffel et al., 2020)-based model TOATOD (Bang et al., 2023), which is the SOTA model in GlobalWOZ2.2. TOATOD uses T5-base pretrained on a large number of task-oriented dialogue corpora as its backbone model, but such corpora do not exist in Japanese. Therefore, for the evaluation of JGlobalWOZ, we simply use T5-base/large pretrained on Japanese data as backbone models.\n\nFigure 4 depicts the overview of response generation using T5. First, the dialogue state is estimated from the dialogue context (i.e., DST). Then, the database search results, obtained by using the dialogue state as a DB query, are combined with the context and dialogue state to generate the final response (i.e., RG). During fine-tuning, the mapping of ground truth inputs and outputs at each step is learned using maximum likelihood estimation (MLE). Because the same model is used to perform both DST and RG, a prefix indicating the task is added to the input. Specific examples of the input-output sequences used in the training of T5 can be found in Section A in the appendix.\n\nIn the training of T5-base and T5-large, the batch size was set to 32, and they were trained for five epochs. The AdamW Loshchilov and Hutter (2019) optimizer was used, and the learning rate was initially set to 5e-5 and then linearly decayed according to the number of steps. For evaluation, the checkpoint at the final step was used, and for inference in DST and RG, greedy search was adopted in both cases.\n\nWe use the zero-/few-shot response generation pipeline using an LLM introduced by Hudeček and Dusek (2023). Figure 4 shows the 3-step flow of zero-shot response generation. First, the LLM estimates the current active domain from the context. Then, focusing on that domain, it estimates the dialogue state. Based on the state, it searches the DB and uses all of the results to generate the final response. In the few-shot setting, two examples retrieved from the train set are mixed into each prompt in the pipeline. These examples are retrieved from the train set based on the similarity between the dialogue context embeddings of the retrieved examples and the current context embeddings. The Japanese sentence-transformers were used to create embedding vectors using two consecutive turns of utterances as the dialogue context.\n\nWe used APIs of OpenAI GPT-3.5 (gpt-3.5-turbo) and GPT-4 (gpt-4) for the LLM-based zero-/few-shot settings. GPT-3.5 is the highest performing model for DST and RG on GlobalWOZ, as reported by Hudeček and Dusek (2023). GPT-4 is the latest model provided by OpenAI’s API and is known for its high capabilities in Japanese. The Japanese prompts were created based on the prompts in (Hudeček and Dusek, 2023). See Section B in the Appendix for examples of the prompts."
        },
        {
            "section_id": "4.2",
            "parent_section_id": "4",
            "section_name": "4.2.   Evaluation Metrics",
            "text": "To evaluate DST, we used the most standard metric, joint goal accuracy (JGA). JGA is a measure of whether the estimated dialogue state perfectly matches the ground truth dialogue state at each turn, resulting in a binary outcome (0/1). Additionally, we also utilized Slot-F1 to evaluate for each turn the match rate between the set of slot values in the estimated dialogue state and the set of slot values in the ground truth state, in terms of F1 score. To evaluate RG, we used the BLEU score, which indicates the similarity between the generated response and the ground truth response."
        },
        {
            "section_id": "4.3",
            "parent_section_id": "4",
            "section_name": "4.3.   Results",
            "text": "Table 8 ###reference_### shows a comparison between the evaluation results reported in previous studies on GlobalWOZ and those of JGlobalWOZ. On JGlobalWOZ, the SFT method, namely T5-base/large, generally had the highest performance for both DST and RG, and there seemed to be certain limitations to the performance of LLMs. This trend is consistent with the results of GlobalWOZ.\n\nFor the DST metrics, Slot-F1 was higher in JGlobalWOZ. As described in Section 3.4 ###reference_###, in the construction of JGlobalWOZ, we chose the selection-based input for the DB search query by the wizard to reduce variations in dialogue state reported as issues in GlobalWOZ. This enabled the dialogue models to predict exact values without confusion, resulting in higher slot-F1.\n\nFor JGA, the primary metric for DST, the difference between GlobalWOZ and JGlobalWOZ was minimal. This suggests that the complexity and annotation accuracy of JGlobalWOZ are comparable to that of GlobalWOZ, demonstrating its capacity to provide benchmarks equivalent to the existing datasets. Notably, there is a difference of about 5% in JGA for T5-base across both corpora. This gap can be attributed to the fact that in GlobalWOZ, besides supervised learning, T5-base was boosted via reinforcement learning with the reward functions where JGA was incorporated.\n\nFor the RG metric, BLEU, JGlobalWOZ yielded significantly higher scores compared to GlobalWOZ. This is likely because the wizard’s utterances in JGlobalWOZ are more consistent than in GlobalWOZ. During the dialogue collection for JGlobalWOZ, the dialogues were conducted synchronously, ensuring that the wizards did not switch in the middle of each dialogue. Moreover, we provided ample training for the wizards. Through such quality control measures, we believe that consistent system responses could be attained."
        },
        {
            "section_id": "5",
            "parent_section_id": null,
            "section_name": "5.   Human Evaluation",
            "text": "The model’s actual task completion capability in real dialogues must be assessed by actual people when evaluating task-oriented dialogue models as well as by automatic evaluation (Iizuka et al., 2023  ###reference_b17###). In this section, we evaluate the end-to-end dialogue capabilities of the four dialogue models acquired in Section 4  ###reference_###, namely, T5-base, T5-large, GPT-3.5, and GPT-4, by having them engage in conversations with crowd workers. Note that both GPT-3.5 and GPT-4 used a few-shot setting."
        },
        {
            "section_id": "5.1",
            "parent_section_id": "5",
            "section_name": "5.1.   Settings",
            "text": "The setting of this evaluation experiment followed that of Iizuka et al. (2023 ###reference_b17###), where they evaluated the end-to-end dialogue performance of the TOATOD (Bang et al., 2023 ###reference_b1###) and Hudeček and Dusek (2023 ###reference_b15###)’s LLM pipeline models built based on the GlobalWOZ by using crowdsourcing. Specifically, each worker was first given dialogue instructions and a user goal for each dialogue session. These user goals were randomly sampled from the test set. Then, they engaged in a dialogue with one of the four models. Each dialogue was set to a maximum of 20 turns (one turn consists of one user utterance and one system response), and workers judged whether they achieved the user goal within 20 turns. After the dialogue, the workers evaluated (1) the system’s language understanding ability, (2) the appropriateness of the system’s responses, and (3) their overall satisfaction with the dialogue, each on a 5-point scale. The workers were restricted to converse with only one system."
        },
        {
            "section_id": "5.2",
            "parent_section_id": "5",
            "section_name": "5.2.   Results",
            "text": "Table 9 presents the evaluation results on JGlobalWOZ, as well as the results reported by Iizuka et al. (2023) on GlobalWOZ2.2. For the models trained with SFT, namely T5-base/large, there was no significant difference in Success, compared to T5-base (TOATOD) on GlobalWOZ2.2. These results show that using JGlobalWOZ allows for the development and evaluation of Japanese end-to-end dialogue models with performance comparable to that of GlobalWOZ2.2. \n\nThe performance of the LLM models, i.e., GPT-3.5 and GPT-4, significantly declined compared to that of GlobalWOZ2.2. This may be because even the latest LLMs, such as GPT-4, are not capable of handling dynamically changing dialogue contexts in Japanese. Specifically, since the model’s predicted dialogue states and system responses are accumulated in the dialogue history, errors propagate gradually, making it difficult to maintain multi-turn conversations. GPT-4’s Japanese language ability is not as high as that for English (OpenAI, 2023), and this difference in ability is likely reflected in the performance of task-oriented dialogue systems. This limitation of dialogue skills in LLMs in non-English languages should be addressed with multilingual resources in the future, and we anticipate that JGlobalWOZ can contribute to such studies."
        },
        {
            "section_id": "6",
            "parent_section_id": null,
            "section_name": "6.   Conclusion",
            "text": "We have presented JGlobalWOZ, the first large-scale Japanese multi-domain task-oriented dialogue dataset. This corpus contains 4,246 WOZ dialogues spanning six travel-related domains and provides benchmarks for dialogue state tracking and response generation. Using JGlobalWOZ, we evaluated existing SOTA methods with the T5-based models and the latest LLM-based methods, namely GPT-3.5/4, and demonstrated that JGlobalWOZ performs comparably to the major benchmark dataset in English, GlobalWOZ. Furthermore, we confirmed that the capabilities of GPT-3.5/4 in particular are limited in Japanese. For future work, we would like to conduct comprehensive evaluation using more diverse models, including other LLMs with high multilingual abilities (Team et al., 2023  ###reference_b31###). We hope that the development of JGlobalWOZ will lead to further research on Japanese dialogue systems, including the improvement of LLMs’ task-oriented dialogue capabilities in Japanese and the development of a multilingual task-oriented dialogue model."
        },
        {
            "section_id": "7",
            "parent_section_id": null,
            "section_name": "7.   Limitations",
            "text": "In this study, to collect native dialogues specific to Japan, we collected online conversations through Japanese crowd workers. However, in prior research, multilingual corpora were built through machine translations of GlobalWOZ, and GlobalWOZ (Ding et al., 2022  ###reference_b5###) includes Japanese dialogue data, albeit being entirely machine-translated. Therefore, in the future, it will be necessary to investigate the advantages of JGlobalWOZ, which we collected from scratch, compared to GlobalWOZ. Additionally, it may be possible to further improve performance by using GlobalWOZ for pre-training and then fine-tuning with our JGlobalWOZ; this will need to be validated in the future. JGlobalWOZ provides benchmarks for two main tasks, DST and RG, through dialogue state annotations, enabling the construction and evaluation of end-to-end task-oriented dialogue models. However, it does not yet have dialogue act (DA) annotations (Budzianowski et al., 2018  ###reference_b2###; Eric et al., 2020  ###reference_b7###). This means that it does not provide a benchmark for another major task in task-oriented dialogue, policy optimization. Therefore, to further enhance its utility, DA annotations should be added in the future."
        },
        {
            "section_id": "8",
            "parent_section_id": null,
            "section_name": "8.   Ethical Considerations",
            "text": "Our ethical considerations span across data sources, dialogue collection, human evaluation, and the implications of using pretrained language models (PLMs).\nWe exclusively employed information sources free from copyright constraints. Our list of entities was primarily derived from websites operated by the government or municipalities. Specific information for each entity was solely extracted from their respective official websites, ensuring authenticity and credibility. We consciously abstained from using tourism sites, or any other source potentially encumbered by copyright issues.\nPrior to our data collection and evaluation experiments, ethical approval was obtained from the affiliated organization. In the data collection and evaluations, we engaged only crowd workers who explicitly consented to abstain from (1) unsolicited disclosure of personal information during dialogues. Additionally, these workers agreed to (2) relinquish copyright claims over data and artifacts produced during the dialogue collection phase and (3) publication of collected dialogue data. The data to be released will not contain any personally identifiable information of the workers, such as their names.\nThe pre-training data of the PLMs uses a vast amount of textual data from Internet information. Therefore, our dialogue models based on these PLMs may produce potentially harmful or discriminatory responses."
        },
        {
            "section_id": "9",
            "parent_section_id": null,
            "section_name": "9.   Acknowledgments",
            "text": "This work was supported by JST Moonshot R&D Grant number JPMJMS2011. We used the computational resources of the supercomputer “Flow” at the Information Technology Center, Nagoya University."
        }
    ]
}